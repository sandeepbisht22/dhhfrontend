{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bisht/Project/deployment/dhh/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/bisht/Project/deployment/dhh/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{LOGIN_USER_SUCCESS,LOGIN_USER_FAIL,SIGNUP_USER_SUCCESS,SIGNUP_FAIL,LOAD_USER,LOGOUT_USER,AUTH_FAIL,CLEAR_ERROR,LOGIN_VIA_GOOGLE,UPDATE_USER_INFO}from\"../types\";import axios from\"axios\";import setAuthToken from\"../../utils/setAuthnToken\";//Will store logged in or Signed up user\nexport var loadUser=function loadUser(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"load User is called\");setAuthToken(localStorage.token);_context.prev=2;_context.next=5;return axios.get(\"/auth\");case 5:res=_context.sent;console.log(\"loading user with value\"+res);dispatch({type:LOAD_USER,payload:res.data});console.log(\"loading user  completed\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);//TODO\ndispatch({type:AUTH_FAIL,payload:_context.t0.response.data.msg});case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};//Register User on database\nexport var signUpUser=function signUpUser(formData){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;config={headers:{\"content-type\":\"application/json\"}};//Have  to make rest call for registering user\n_context2.next=4;return axios.post(\"/user\",formData,config);case 4:res=_context2.sent;dispatch({type:SIGNUP_USER_SUCCESS,payload:res.data});loadUser()(dispatch);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);dispatch({type:SIGNUP_FAIL,payload:_context2.t0.response.data.msg});case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// Login User when check with Database\nexport var loginUser=function loginUser(formData){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(\"login user is called\");_context3.prev=1;config={headers:{\"content-type\":\"application/json\"}};//Will make a rest call to check if we can login and the set token returned\n_context3.next=5;return axios.post(\"/auth\",formData,config);case 5:res=_context3.sent;console.log(\"dispatching for LOGIN_USER_SUCCESS with res\"+JSON.stringify(res.data));dispatch({type:LOGIN_USER_SUCCESS,payload:res.data});console.log(\"LOGIN_USER_SUCCESS returned\");loadUser()(dispatch);_context3.next=15;break;case 12:_context3.prev=12;_context3.t0=_context3[\"catch\"](1);dispatch({type:LOGIN_USER_FAIL,payload:_context3.t0.response.data.msg});case 15:case\"end\":return _context3.stop();}}},_callee3,null,[[1,12]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};//Loging in user via google\nexport var loginViaGoogle=function loginViaGoogle(email){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get(\"/user/\".concat(email));case 2:res=_context4.sent;console.log(\"User res from google info\");console.log(JSON.stringify(res));dispatch({type:LOGIN_VIA_GOOGLE,payload:res.data});case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var updateUserInfo=function updateUserInfo(formData){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:config={headers:{\"content-type\":\"application/json\"}};_context5.next=3;return axios.post(\"/user/update\",formData,config);case 3:res=_context5.sent;dispatch({type:UPDATE_USER_INFO,payload:res.data});case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref5.apply(this,arguments);};}();};//Logout USer\nexport var logoutUser=function logoutUser(){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:dispatch({type:LOGOUT_USER});case 1:case\"end\":return _context6.stop();}}},_callee6);}));return function(_x6){return _ref6.apply(this,arguments);};}();};//Clear all errors\nexport var clearErrors=function clearErrors(){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:dispatch({type:CLEAR_ERROR});case 1:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x7){return _ref7.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/bisht/Project/deployment/dhh/client/src/state/actions/userAction.js"],"names":["LOGIN_USER_SUCCESS","LOGIN_USER_FAIL","SIGNUP_USER_SUCCESS","SIGNUP_FAIL","LOAD_USER","LOGOUT_USER","AUTH_FAIL","CLEAR_ERROR","LOGIN_VIA_GOOGLE","UPDATE_USER_INFO","axios","setAuthToken","loadUser","dispatch","console","log","localStorage","token","get","res","type","payload","data","response","msg","signUpUser","formData","config","headers","post","loginUser","JSON","stringify","loginViaGoogle","email","updateUserInfo","logoutUser","clearErrors"],"mappings":"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","sourcesContent":["import {\r\n  LOGIN_USER_SUCCESS,\r\n  LOGIN_USER_FAIL,\r\n  SIGNUP_USER_SUCCESS,\r\n  SIGNUP_FAIL,\r\n  LOAD_USER,\r\n  LOGOUT_USER,\r\n  AUTH_FAIL,\r\n  CLEAR_ERROR,\r\n  LOGIN_VIA_GOOGLE,\r\n  UPDATE_USER_INFO,\r\n} from \"../types\";\r\nimport axios from \"axios\";\r\nimport setAuthToken from \"../../utils/setAuthnToken\";\r\n\r\n//Will store logged in or Signed up user\r\nexport const loadUser = () => async (dispatch) => {\r\n  console.log(\"load User is called\");\r\n  setAuthToken(localStorage.token);\r\n  try {\r\n    const res = await axios.get(\"/auth\");\r\n    console.log(\"loading user with value\" + res);\r\n    dispatch({\r\n      type: LOAD_USER,\r\n      payload: res.data,\r\n    });\r\n    console.log(\"loading user  completed\");\r\n  } catch (error) {\r\n    //TODO\r\n    dispatch({\r\n      type: AUTH_FAIL,\r\n      payload: error.response.data.msg,\r\n    });\r\n  }\r\n};\r\n\r\n//Register User on database\r\nexport const signUpUser = (formData) => async (dispatch) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    };\r\n    //Have  to make rest call for registering user\r\n    const res = await axios.post(\"/user\", formData, config);\r\n\r\n    dispatch({\r\n      type: SIGNUP_USER_SUCCESS,\r\n      payload: res.data,\r\n    });\r\n    loadUser()(dispatch);\r\n  } catch (errors) {\r\n    dispatch({\r\n      type: SIGNUP_FAIL,\r\n      payload: errors.response.data.msg,\r\n    });\r\n  }\r\n};\r\n\r\n// Login User when check with Database\r\nexport const loginUser = (formData) => async (dispatch) => {\r\n  console.log(\"login user is called\");\r\n\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    };\r\n    //Will make a rest call to check if we can login and the set token returned\r\n    const res = await axios.post(\"/auth\", formData, config);\r\n    console.log(\r\n      \"dispatching for LOGIN_USER_SUCCESS with res\" + JSON.stringify(res.data)\r\n    );\r\n    dispatch({\r\n      type: LOGIN_USER_SUCCESS,\r\n      payload: res.data,\r\n    });\r\n    console.log(\"LOGIN_USER_SUCCESS returned\");\r\n    loadUser()(dispatch);\r\n  } catch (errors) {\r\n    dispatch({\r\n      type: LOGIN_USER_FAIL,\r\n      payload: errors.response.data.msg,\r\n    });\r\n  }\r\n};\r\n\r\n//Loging in user via google\r\nexport const loginViaGoogle = (email) => async (dispatch) => {\r\n  const res = await axios.get(`/user/${email}`);\r\n  console.log(\"User res from google info\");\r\n  console.log(JSON.stringify(res));\r\n  dispatch({\r\n    type: LOGIN_VIA_GOOGLE,\r\n    payload: res.data,\r\n  });\r\n};\r\n\r\nexport const updateUserInfo = (formData) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n    },\r\n  };\r\n  const res = await axios.post(\"/user/update\", formData, config);\r\n  dispatch({\r\n    type: UPDATE_USER_INFO,\r\n    payload: res.data,\r\n  });\r\n};\r\n\r\n//Logout USer\r\nexport const logoutUser = () => async (dispatch) => {\r\n  dispatch({\r\n    type: LOGOUT_USER,\r\n  });\r\n};\r\n\r\n//Clear all errors\r\nexport const clearErrors = () => async (dispatch) => {\r\n  dispatch({\r\n    type: CLEAR_ERROR,\r\n  });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}