{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/bisht/Project/deployment/dhh/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/bisht/Project/deployment/dhh/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{ARTIST_TYPE,ARTISTS_INFO,CURRENT_ARTIST,ARTIST_UNLIKED,ARTIST_LIKED,CURR_CATEGORY_ARTIST_INFO}from\"../types\";import axios from\"axios\";export var currentArtistType=function currentArtistType(artist){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:try{dispatch({type:ARTIST_TYPE,payload:artist});}catch(error){//TODO\n}case 1:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var artistsInfo=function artistsInfo(artistType,titles){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:try{console.log(\"Start executing calls inside for\");axios.all(titles.map(function(title){return axios.get(\"/artist/\".concat(artistType,\"/title/\").concat(title));})).then(axios.spread(function(){for(var _len=arguments.length,res=new Array(_len),_key=0;_key<_len;_key++){res[_key]=arguments[_key];}// all requests are now complete\nconsole.log(\"final response is\"+res);dispatch({type:ARTISTS_INFO,payload:res});}));}catch(error){console.log(\"Error is \"+error);}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var currCategoryArtistInfo=function currCategoryArtistInfo(artistType,title){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;console.log(\"Start executing calls inside for\");_context3.next=4;return axios.get(\"/artist/\".concat(artistType,\"/title/\").concat(title));case 4:res=_context3.sent;dispatch({type:CURR_CATEGORY_ARTIST_INFO,payload:res.data});_context3.next=11;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(\"Error is \"+_context3.t0);case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,8]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};////Like artist\nexport var likeUnLikeArtist=function likeUnLikeArtist(artistType,likeUnlikeInfo,likeUnLike){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var config,action;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};_context4.next=3;return axios.post(\"/artist/\".concat(artistType,\"/rate/\").concat(likeUnLike),likeUnlikeInfo,config);case 3:action=likeUnLike===\"like\"?ARTIST_LIKED:ARTIST_UNLIKED;dispatch({type:action,payload:likeUnlikeInfo});//Nothing needed from backend just dispatch to reducer and tell it to update state.\ncase 5:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}();};//Fetch current artist Info\nexport var currentArtistInfo=function currentArtistInfo(artistType,artistName){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var res,id,songs;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.get(\"/artist/\".concat(artistType,\"/name/\").concat(artistName));case 3:res=_context5.sent;id=res.data[0]._id;_context5.next=7;return axios.get(\"/song/\".concat(artistType,\"/\").concat(id));case 7:songs=_context5.sent;res.data[0].songs=songs.data;console.log(JSON.stringify(res.data[0].songs));dispatch({type:CURRENT_ARTIST,payload:res.data[0]});_context5.next=15;break;case 13:_context5.prev=13;_context5.t0=_context5[\"catch\"](0);case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[0,13]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};","map":{"version":3,"sources":["C:/Users/bisht/Project/deployment/dhh/client/src/state/actions/artistAction.js"],"names":["ARTIST_TYPE","ARTISTS_INFO","CURRENT_ARTIST","ARTIST_UNLIKED","ARTIST_LIKED","CURR_CATEGORY_ARTIST_INFO","axios","currentArtistType","artist","dispatch","type","payload","error","artistsInfo","artistType","titles","console","log","all","map","title","get","then","spread","res","currCategoryArtistInfo","data","likeUnLikeArtist","likeUnlikeInfo","likeUnLike","config","headers","post","action","currentArtistInfo","artistName","id","_id","songs","JSON","stringify"],"mappings":"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","sourcesContent":["import {\r\n  ARTIST_TYPE,\r\n  ARTISTS_INFO,\r\n  CURRENT_ARTIST,\r\n  ARTIST_UNLIKED,\r\n  ARTIST_LIKED,\r\n  CURR_CATEGORY_ARTIST_INFO,\r\n} from \"../types\";\r\nimport axios from \"axios\";\r\nexport const currentArtistType = (artist) => async (dispatch) => {\r\n  try {\r\n    dispatch({\r\n      type: ARTIST_TYPE,\r\n      payload: artist,\r\n    });\r\n  } catch (error) {\r\n    //TODO\r\n  }\r\n};\r\n\r\nexport const artistsInfo = (artistType, titles) => async (dispatch) => {\r\n  try {\r\n    console.log(\"Start executing calls inside for\");\r\n    axios\r\n      .all(\r\n        titles.map((title) => axios.get(`/artist/${artistType}/title/${title}`))\r\n      )\r\n      .then(\r\n        axios.spread(function (...res) {\r\n          // all requests are now complete\r\n          console.log(\"final response is\" + res);\r\n          dispatch({\r\n            type: ARTISTS_INFO,\r\n            payload: res,\r\n          });\r\n        })\r\n      );\r\n  } catch (error) {\r\n    console.log(\"Error is \" + error);\r\n  }\r\n};\r\nexport const currCategoryArtistInfo =\r\n  (artistType, title) => async (dispatch) => {\r\n    try {\r\n      console.log(\"Start executing calls inside for\");\r\n\r\n      const res = await axios.get(`/artist/${artistType}/title/${title}`);\r\n\r\n      dispatch({\r\n        type: CURR_CATEGORY_ARTIST_INFO,\r\n        payload: res.data,\r\n      });\r\n    } catch (error) {\r\n      console.log(\"Error is \" + error);\r\n    }\r\n  };\r\n////Like artist\r\n\r\nexport const likeUnLikeArtist =\r\n  (artistType, likeUnlikeInfo, likeUnLike) => async (dispatch) => {\r\n    const config = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n\r\n    await axios.post(\r\n      `/artist/${artistType}/rate/${likeUnLike}`,\r\n      likeUnlikeInfo,\r\n      config\r\n    );\r\n    const action = likeUnLike === \"like\" ? ARTIST_LIKED : ARTIST_UNLIKED;\r\n    dispatch({\r\n      type: action,\r\n      payload: likeUnlikeInfo,\r\n    });\r\n    //Nothing needed from backend just dispatch to reducer and tell it to update state.\r\n  };\r\n\r\n//Fetch current artist Info\r\nexport const currentArtistInfo =\r\n  (artistType, artistName) => async (dispatch) => {\r\n    try {\r\n      const res = await axios.get(`/artist/${artistType}/name/${artistName}`);\r\n      const id = res.data[0]._id;\r\n      const songs = await axios.get(`/song/${artistType}/${id}`);\r\n      res.data[0].songs = songs.data;\r\n      console.log(JSON.stringify(res.data[0].songs));\r\n\r\n      dispatch({\r\n        type: CURRENT_ARTIST,\r\n        payload: res.data[0],\r\n      });\r\n    } catch (error) {\r\n      //TODO\r\n    }\r\n  };\r\n"]},"metadata":{},"sourceType":"module"}