{"ast":null,"code":"import { LOGIN_USER_SUCCESS, LOGIN_USER_FAIL, SIGNUP_USER_SUCCESS, SIGNUP_FAIL, LOAD_USER, LOGOUT_USER, AUTH_FAIL, CLEAR_ERROR, LOGIN_VIA_GOOGLE } from \"../types\";\nimport axios from \"axios\";\nimport setAuthToken from \"../../utils/setAuthnToken\"; //Will store logged in or Signed up user\n\nexport const loadUser = () => async dispatch => {\n  console.log(\"load User is called\");\n  setAuthToken(localStorage.token);\n\n  try {\n    const res = await axios.get(\"/auth\");\n    console.log(\"loading user with value\" + res);\n    dispatch({\n      type: LOAD_USER,\n      payload: res.data\n    });\n    console.log(\"loading user  completed\");\n  } catch (error) {\n    //TODO\n    dispatch({\n      type: AUTH_FAIL,\n      payload: error.response.data.msg\n    });\n  }\n}; //Register User on database\n\nexport const signUpUser = formData => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        \"content-type\": \"application/json\"\n      }\n    }; //Have  to make rest call for registering user\n\n    const res = await axios.post(\"/user\", formData, config);\n    dispatch({\n      type: SIGNUP_USER_SUCCESS,\n      payload: res.data\n    });\n    loadUser()(dispatch);\n  } catch (errors) {\n    dispatch({\n      type: SIGNUP_FAIL,\n      payload: errors.response.data.msg\n    });\n  }\n}; // Login User when check with Database\n\nexport const loginUser = formData => async dispatch => {\n  console.log(\"login user is called\");\n\n  try {\n    const config = {\n      headers: {\n        \"content-type\": \"application/json\"\n      }\n    }; //Will make a rest call to check if we can login and the set token returned\n\n    const res = await axios.post(\"/auth\", formData, config);\n    console.log(\"dispatching for LOGIN_USER_SUCCESS with res\" + JSON.stringify(res.data));\n    dispatch({\n      type: LOGIN_USER_SUCCESS,\n      payload: res.data\n    });\n    console.log(\"LOGIN_USER_SUCCESS returned\");\n    loadUser()(dispatch);\n  } catch (errors) {\n    dispatch({\n      type: LOGIN_USER_FAIL,\n      payload: errors.response.data.msg\n    });\n  }\n}; //Loging in user via google\n\nexport const loginViaGoogle = email => async dispatch => {\n  const res = await axios.get(`/user/${email}`);\n  console.log(\"User res from google info\");\n  console.log(JSON.stringify(res));\n  dispatch({\n    type: LOGIN_VIA_GOOGLE,\n    payload: res.data\n  });\n};\nexport const updateUserInfo = user => async dispatch => {\n  const config = {\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  };\n  const res = await axios.post(\"/user/update\", formData, config);\n}; //Logout USer\n\nexport const logoutUser = () => async dispatch => {\n  dispatch({\n    type: LOGOUT_USER\n  });\n}; //Clear all errors\n\nexport const clearErrors = () => async dispatch => {\n  dispatch({\n    type: CLEAR_ERROR\n  });\n};","map":{"version":3,"sources":["C:/Users/bisht/Project/DHH/dhh/client/src/state/actions/userAction.js"],"names":["LOGIN_USER_SUCCESS","LOGIN_USER_FAIL","SIGNUP_USER_SUCCESS","SIGNUP_FAIL","LOAD_USER","LOGOUT_USER","AUTH_FAIL","CLEAR_ERROR","LOGIN_VIA_GOOGLE","axios","setAuthToken","loadUser","dispatch","console","log","localStorage","token","res","get","type","payload","data","error","response","msg","signUpUser","formData","config","headers","post","errors","loginUser","JSON","stringify","loginViaGoogle","email","updateUserInfo","user","logoutUser","clearErrors"],"mappings":"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","sourcesContent":["import {\r\n  LOGIN_USER_SUCCESS,\r\n  LOGIN_USER_FAIL,\r\n  SIGNUP_USER_SUCCESS,\r\n  SIGNUP_FAIL,\r\n  LOAD_USER,\r\n  LOGOUT_USER,\r\n  AUTH_FAIL,\r\n  CLEAR_ERROR,\r\n  LOGIN_VIA_GOOGLE,\r\n} from \"../types\";\r\nimport axios from \"axios\";\r\nimport setAuthToken from \"../../utils/setAuthnToken\";\r\n\r\n//Will store logged in or Signed up user\r\nexport const loadUser = () => async (dispatch) => {\r\n  console.log(\"load User is called\");\r\n  setAuthToken(localStorage.token);\r\n  try {\r\n    const res = await axios.get(\"/auth\");\r\n    console.log(\"loading user with value\" + res);\r\n    dispatch({\r\n      type: LOAD_USER,\r\n      payload: res.data,\r\n    });\r\n    console.log(\"loading user  completed\");\r\n  } catch (error) {\r\n    //TODO\r\n    dispatch({\r\n      type: AUTH_FAIL,\r\n      payload: error.response.data.msg,\r\n    });\r\n  }\r\n};\r\n\r\n//Register User on database\r\nexport const signUpUser = (formData) => async (dispatch) => {\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    };\r\n    //Have  to make rest call for registering user\r\n    const res = await axios.post(\"/user\", formData, config);\r\n\r\n    dispatch({\r\n      type: SIGNUP_USER_SUCCESS,\r\n      payload: res.data,\r\n    });\r\n    loadUser()(dispatch);\r\n  } catch (errors) {\r\n    dispatch({\r\n      type: SIGNUP_FAIL,\r\n      payload: errors.response.data.msg,\r\n    });\r\n  }\r\n};\r\n\r\n// Login User when check with Database\r\nexport const loginUser = (formData) => async (dispatch) => {\r\n  console.log(\"login user is called\");\r\n\r\n  try {\r\n    const config = {\r\n      headers: {\r\n        \"content-type\": \"application/json\",\r\n      },\r\n    };\r\n    //Will make a rest call to check if we can login and the set token returned\r\n    const res = await axios.post(\"/auth\", formData, config);\r\n    console.log(\r\n      \"dispatching for LOGIN_USER_SUCCESS with res\" + JSON.stringify(res.data)\r\n    );\r\n    dispatch({\r\n      type: LOGIN_USER_SUCCESS,\r\n      payload: res.data,\r\n    });\r\n    console.log(\"LOGIN_USER_SUCCESS returned\");\r\n    loadUser()(dispatch);\r\n  } catch (errors) {\r\n    dispatch({\r\n      type: LOGIN_USER_FAIL,\r\n      payload: errors.response.data.msg,\r\n    });\r\n  }\r\n};\r\n\r\n//Loging in user via google\r\nexport const loginViaGoogle = (email) => async (dispatch) => {\r\n  const res = await axios.get(`/user/${email}`);\r\n  console.log(\"User res from google info\");\r\n  console.log(JSON.stringify(res));\r\n  dispatch({\r\n    type: LOGIN_VIA_GOOGLE,\r\n    payload: res.data,\r\n  });\r\n};\r\n\r\nexport const updateUserInfo = (user) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n    },\r\n  };\r\n  const res = await axios.post(\"/user/update\", formData, config);\r\n};\r\n\r\n//Logout USer\r\nexport const logoutUser = () => async (dispatch) => {\r\n  dispatch({\r\n    type: LOGOUT_USER,\r\n  });\r\n};\r\n\r\n//Clear all errors\r\nexport const clearErrors = () => async (dispatch) => {\r\n  dispatch({\r\n    type: CLEAR_ERROR,\r\n  });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}