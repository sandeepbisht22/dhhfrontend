{"ast":null,"code":"import { LOGIN_USER_SUCCESS, REGISTER_USER_SUCCESS, LOAD_USER } from \"../types\";\nimport axios from \"axios\";\nimport setAuthToken from \"../../utils/setAuthnToken\"; //Will store logged in or Signed up user\n\nexport const loadUser = async () => async dispatch => {\n  console.log(\"load User is called\");\n  setAuthToken(localStorage.token);\n\n  try {\n    const res = await axios.get(\"/user\");\n    dispatchEvent({\n      type: LOAD_USER,\n      payload: res.data\n    });\n  } catch (error) {//TODO\n  }\n}; //Register User on database\n\nexport const signUpUser = formData => async dispatch => {\n  const config = {\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  }; //Have  to make rest call for registering user\n\n  const res = await axios.post(\"/user\", formData, config);\n  console.log(\"res.data \");\n  dispatch({\n    type: REGISTER_USER_SUCCESS,\n    payload: res.data\n  });\n  loadUser();\n}; // Login User when check with Database\n\nexport const loginUser = formData => async dispatch => {\n  console.log(\"login user is called\");\n  const config = {\n    headers: {\n      \"content-type\": \"application/json\"\n    }\n  }; //Will make a rest call to check if we can login and the set token returned\n\n  const res = await axios.post(\"/auth\", formData, config);\n  dispatch({\n    type: LOGIN_USER_SUCCESS,\n    payload: res.data\n  });\n  loadUser();\n};","map":{"version":3,"sources":["C:/Users/bisht/Project/DHH/dhh/client/src/state/actions/userAction.js"],"names":["LOGIN_USER_SUCCESS","REGISTER_USER_SUCCESS","LOAD_USER","axios","setAuthToken","loadUser","dispatch","console","log","localStorage","token","res","get","dispatchEvent","type","payload","data","error","signUpUser","formData","config","headers","post","loginUser"],"mappings":"AAAA,SAASA,kBAAT,EAA6BC,qBAA7B,EAAoDC,SAApD,QAAqE,UAArE;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,2BAAzB,C,CAEA;;AACA,OAAO,MAAMC,QAAQ,GAAG,YAAY,MAAOC,QAAP,IAAoB;AACtDC,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAJ,EAAAA,YAAY,CAACK,YAAY,CAACC,KAAd,CAAZ;;AACA,MAAI;AACF,UAAMC,GAAG,GAAG,MAAMR,KAAK,CAACS,GAAN,CAAU,OAAV,CAAlB;AACAC,IAAAA,aAAa,CAAC;AACZC,MAAAA,IAAI,EAAEZ,SADM;AAEZa,MAAAA,OAAO,EAAEJ,GAAG,CAACK;AAFD,KAAD,CAAb;AAID,GAND,CAME,OAAOC,KAAP,EAAc,CACd;AACD;AACF,CAZM,C,CAcP;;AACA,OAAO,MAAMC,UAAU,GAAIC,QAAD,IAAc,MAAOb,QAAP,IAAoB;AAC1D,QAAMc,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AADI,GAAf,CAD0D,CAM1D;;AACA,QAAMV,GAAG,GAAG,MAAMR,KAAK,CAACmB,IAAN,CAAW,OAAX,EAAoBH,QAApB,EAA8BC,MAA9B,CAAlB;AACAb,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AAEAF,EAAAA,QAAQ,CAAC;AACPQ,IAAAA,IAAI,EAAEb,qBADC;AAEPc,IAAAA,OAAO,EAAEJ,GAAG,CAACK;AAFN,GAAD,CAAR;AAIAX,EAAAA,QAAQ;AACT,CAfM,C,CAiBP;;AACA,OAAO,MAAMkB,SAAS,GAAIJ,QAAD,IAAc,MAAOb,QAAP,IAAoB;AACzDC,EAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AAEA,QAAMY,MAAM,GAAG;AACbC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT;AADI,GAAf,CAHyD,CAQzD;;AACA,QAAMV,GAAG,GAAG,MAAMR,KAAK,CAACmB,IAAN,CAAW,OAAX,EAAoBH,QAApB,EAA8BC,MAA9B,CAAlB;AACAd,EAAAA,QAAQ,CAAC;AACPQ,IAAAA,IAAI,EAAEd,kBADC;AAEPe,IAAAA,OAAO,EAAEJ,GAAG,CAACK;AAFN,GAAD,CAAR;AAIAX,EAAAA,QAAQ;AACT,CAfM","sourcesContent":["import { LOGIN_USER_SUCCESS, REGISTER_USER_SUCCESS, LOAD_USER } from \"../types\";\r\nimport axios from \"axios\";\r\nimport setAuthToken from \"../../utils/setAuthnToken\";\r\n\r\n//Will store logged in or Signed up user\r\nexport const loadUser = async () => async (dispatch) => {\r\n  console.log(\"load User is called\");\r\n  setAuthToken(localStorage.token);\r\n  try {\r\n    const res = await axios.get(\"/user\");\r\n    dispatchEvent({\r\n      type: LOAD_USER,\r\n      payload: res.data,\r\n    });\r\n  } catch (error) {\r\n    //TODO\r\n  }\r\n};\r\n\r\n//Register User on database\r\nexport const signUpUser = (formData) => async (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n    },\r\n  };\r\n  //Have  to make rest call for registering user\r\n  const res = await axios.post(\"/user\", formData, config);\r\n  console.log(\"res.data \");\r\n\r\n  dispatch({\r\n    type: REGISTER_USER_SUCCESS,\r\n    payload: res.data,\r\n  });\r\n  loadUser();\r\n};\r\n\r\n// Login User when check with Database\r\nexport const loginUser = (formData) => async (dispatch) => {\r\n  console.log(\"login user is called\");\r\n\r\n  const config = {\r\n    headers: {\r\n      \"content-type\": \"application/json\",\r\n    },\r\n  };\r\n  //Will make a rest call to check if we can login and the set token returned\r\n  const res = await axios.post(\"/auth\", formData, config);\r\n  dispatch({\r\n    type: LOGIN_USER_SUCCESS,\r\n    payload: res.data,\r\n  });\r\n  loadUser();\r\n};\r\n"]},"metadata":{},"sourceType":"module"}